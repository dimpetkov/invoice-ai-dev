import{r as l,j as e,p as Ae,c as $e,G as fe,a as Me,i as ke,b as Ie,R as Ee}from"./rtfParser-Dp1iI0vO.js";const se="You are a helpful AI assistant named Gemini. Keep your responses concise and helpful. Format code snippets appropriately using markdown.",he=[{id:"flash-2.0",name:"2.0 Flash",description:"Fast and cost-effective model for quick responses.",cost:"Lowest",model:"gemini-2.0-flash",config:{systemInstruction:se}},{id:"flash-2.5",name:"2.5 Flash",description:"Enhanced accuracy with good speed.",cost:"Standard",model:"gemini-2.5-flash",config:{systemInstruction:se}},{id:"pro-2.5",name:"2.5 Pro",description:"Most powerful model with highest accuracy.",cost:"Higher",model:"gemini-2.5-pro",config:{systemInstruction:se}}],Fe=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{fillRule:"evenodd",d:"M11.25 3.5A1.75 1.75 0 0 0 9.5 5.25v1.5H11v-1.5a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v1.5h1.5v-1.5A1.75 1.75 0 0 0 12.75 3.5h-1.5Z",clipRule:"evenodd"}),e.jsx("path",{d:"M3 6.5A1.5 1.5 0 0 1 4.5 5h11A1.5 1.5 0 0 1 17 6.5v7a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 3 13.5v-7ZM4.5 6a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-11Z"}),e.jsx("path",{fillRule:"evenodd",d:"M8.75 16.5A1.75 1.75 0 0 0 10.5 14.75v-1.5H9v1.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25v-1.5H5.5v1.5A1.75 1.75 0 0 0 7.25 16.5h1.5Z",clipRule:"evenodd"}),e.jsx("path",{d:"M8 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-7Z"})]}),Le=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}),Te=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-blue-500",children:e.jsx("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"})}),De=({modes:s,selectedMode:c,onSelect:j})=>{const[d,i]=l.useState(!1),g=l.useRef(null);l.useEffect(()=>{const r=S=>{g.current&&!g.current.contains(S.target)&&i(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]);const M=r=>{j(r),i(!1)};return e.jsxs("div",{className:"relative",ref:g,children:[e.jsxs("button",{onClick:()=>i(!d),className:"flex items-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors","aria-haspopup":"true","aria-expanded":d,children:[e.jsx(Fe,{}),e.jsx("span",{children:c.name}),e.jsx(Le,{})]}),d&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-72 bg-gray-800 border border-gray-700 rounded-lg shadow-2xl z-20",children:e.jsx("div",{className:"p-2",children:s.map(r=>e.jsxs("div",{onClick:()=>M(r),className:"p-3 hover:bg-gray-700 rounded-md cursor-pointer",role:"option","aria-selected":c.id===r.id,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-white",children:r.name}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-600/30 text-blue-300 rounded-full",children:r.cost})]}),c.id===r.id&&e.jsx(Te,{})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:r.description})]},r.id))})})]})},ne=s=>s==="7"?Me:ke,Pe=[15,16,19,20,21,26,27,33,34,35,39,40,41],_e=Pe.map(s=>s-1),Ge=s=>{const c=s.trim();if(c==="")return"";const j=c.match(/^(-?\d+)(\.(\d+))?$/);if(!j)return c;const d=j[1],i=j[3]||"";return i.length===0?`${d}.00`:i.length===1?`${d}.${i}0`:c},F="__MANUAL__",Oe=()=>{const[s,c]=l.useState(null),[j,d]=l.useState(null),[i,g]=l.useState(!1),[M,r]=l.useState(!1),[S,R]=l.useState(null),[ee,w]=l.useState(null),[A,U]=l.useState("4"),[P,k]=l.useState("Ð¡Ð¢ÐžÐšÐ˜"),[W,Y]=l.useState(""),[V,Q]=l.useState("ÐœÐÐ¢Ð•Ð Ð˜ÐÐ›Ð˜"),[q,K]=l.useState(""),[n,o]=l.useState("gemini-2.0-flash"),[f,b]=l.useState(""),[m,I]=l.useState(!1),[L,p]=l.useState(!1),[E,_]=l.useState(!1),B=l.useRef(null);l.useEffect(()=>{const t=localStorage.getItem("gemini_api_key"),a=localStorage.getItem("gemini_model");t&&b(t),a&&o(a),t||I(!0)},[]),l.useEffect(()=>{const t=a=>{L&&(a.target.closest(".model-selector-container")||p(!1))};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[L]);const v=t=>{w(t),_(!0)},be=()=>{w(null),_(!1)},ae=(t,a)=>{t&&(localStorage.setItem("gemini_api_key",t),b(t)),localStorage.setItem("gemini_model",a),o(a),I(!1),w(null)},ve=t=>{var x;const a=(x=t.target.files)==null?void 0:x[0];if(a)if(c(a),R(null),w(null),a.type.startsWith("image/")){const h=new FileReader;h.onload=T=>{var u;d((u=T.target)==null?void 0:u.result)},h.readAsDataURL(a)}else d(null)},re=()=>P===F?W.trim():P.trim(),ie=()=>V===F?q.trim():V.trim(),je=(t,a,x)=>{var y,Z;const h=ne(t),T=((y=h.extractionSettings)==null?void 0:y.delimiter)||";",u=((Z=h.extractionSettings)==null?void 0:Z.minimumColumns)||44,z=h.columns.slice(0,u).map(($,N)=>`${N+1}. ${$.name} - ${$.description}`).join(`
`),G={1:"Ð¤Ð°ÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð°",2:"Ð”ÐµÐ±Ð¸Ñ‚Ð½Ð¾ Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð°",3:"ÐšÑ€ÐµÐ´Ð¸Ñ‚Ð½Ð¾ Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð°",4:"Ð¤Ð°ÐºÑ‚ÑƒÑ€Ð° Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ°",5:"Ð”ÐµÐ±Ð¸Ñ‚Ð½Ð¾ Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ°",6:"ÐšÑ€ÐµÐ´Ð¸Ñ‚Ð½Ð¾ Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ°",7:"ÐšÐ°ÑÐ¾Ð²Ð¸ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð¸",8:"Ð¢Ñ€Ð°Ð½ÑÑ„ÐµÑ€",9:"Ð‘Ñ€Ð°Ðº (Ð ÐÐ—Ð¥ÐžÐ”)",10:"Ð‘Ñ€Ð°Ðº (ÐœÐžÐ›)",11:"Ð¡ÐºÐ»Ð°Ð´Ð¾Ð²Ð¾ Ð¸ÑÐºÐ°Ð½Ðµ",12:"Ð¡Ñ‚Ð¾ÐºÐ¾Ð²Ð° Ñ€Ð°Ð·Ð¿Ð¸ÑÐºÐ° (Ð¡Ð¢)",13:"Ð¡ÐºÐ»Ð°Ð´Ð¾Ð²Ð° Ñ€Ð°Ð·Ð¿Ð¸ÑÐºÐ° (Ð¡Ð )",14:"Ð”Ð°Ð²Ð°Ð½Ðµ ÑÑ‚Ð¾ÐºÐ¸ Ð½Ð° ÐºÐ¾Ð½ÑÐ¸Ð³Ð½Ð°Ñ†Ð¸Ñ (ÐšÐ”) ÑÑŠÑ ÑÑ‡ÐµÑ‚. Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸",15:"Ð”Ð°Ð²Ð°Ð½Ðµ ÑÑ‚Ð¾ÐºÐ¸ Ð½Ð° ÐºÐ¾Ð½ÑÐ¸Ð³Ð½Ð°Ñ†Ð¸Ñ (ÐšÐ”) Ð±ÐµÐ· ÑÑ‡ÐµÑ‚. Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸"}[t]||"",H=`
Ð›ÐžÐ“Ð˜ÐšÐ Ð—Ð ÐžÐŸÐ Ð•Ð”Ð•Ð›Ð¯ÐÐ• ÐÐ ÐŸÐÐ Ð¢ÐÐ¬ÐžÐ Ð Ð¡ÐŸÐžÐ Ð•Ð” Ð’Ð˜Ð”. Ð”ÐžÐšÐ£ÐœÐ•ÐÐ¢ (${t}${G?` â€“ ${G}`:""}):

- ÐÐºÐ¾ Ð’Ð¸Ð´. Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ Ðµ 1, 2, 3 Ð¸Ð»Ð¸ 7 (Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð°/Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð°, ÐºÐ°ÑÐ¾Ð²Ð¸ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð¸):
  â€¢ ÐÐ°ÑˆÐ°Ñ‚Ð° Ñ„Ð¸Ñ€Ð¼Ð° Ðµ Ð˜Ð—Ð”ÐÐ¢Ð•Ð›/Ð”ÐžÐ¡Ð¢ÐÐ’Ð§Ð˜Ðš.
  â€¢ ÐŸÐ°Ñ€Ñ‚Ð½ÑŒÐ¾Ñ€ (ÐºÐ¾Ð»Ð¾Ð½Ð¸ 4â€“6) Ðµ ÐŸÐžÐ›Ð£Ð§ÐÐ¢Ð•Ð›/ÐšÐ£ÐŸÐ£Ð’ÐÐ§ (ÐºÐ»Ð¸ÐµÐ½Ñ‚ÑŠÑ‚).

- ÐÐºÐ¾ Ð’Ð¸Ð´. Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ Ðµ 4, 5 Ð¸Ð»Ð¸ 6 (Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð°/Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ°):
  â€¢ ÐÐ°ÑˆÐ°Ñ‚Ð° Ñ„Ð¸Ñ€Ð¼Ð° Ðµ ÐŸÐžÐ›Ð£Ð§ÐÐ¢Ð•Ð›/ÐšÐ£ÐŸÐ£Ð’ÐÐ§.
  â€¢ ÐŸÐ°Ñ€Ñ‚Ð½ÑŒÐ¾Ñ€ (ÐºÐ¾Ð»Ð¾Ð½Ð¸ 4â€“6) Ðµ Ð˜Ð—Ð”ÐÐ¢Ð•Ð›/Ð”ÐžÐ¡Ð¢ÐÐ’Ð§Ð˜Ðš (Ð´Ð¾ÑÑ‚Ð°Ð²Ñ‡Ð¸ÐºÑŠÑ‚).

- ÐÐºÐ¾ Ð’Ð¸Ð´. Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ Ðµ Ð¾Ñ‚ 8 Ð´Ð¾ 15:
  â€¢ ÐÐºÐ¾ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ÑŠÑ‚ ÑÑŠÐ´ÑŠÑ€Ð¶Ð° Ð²ÑŠÐ½ÑˆÐµÐ½ ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚ (Ð´Ñ€ÑƒÐ³Ð° Ñ„Ð¸Ñ€Ð¼Ð° Ð¸Ð·Ð²ÑŠÐ½ Ð½Ð°ÑˆÐ°Ñ‚Ð°) â€“ Ð¸Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð¹ Ð½ÐµÐ³Ð¾ ÐºÐ°Ñ‚Ð¾ ÐŸÐ°Ñ€Ñ‚Ð½ÑŒÐ¾Ñ€ (ÐºÐ¾Ð»Ð¾Ð½Ð¸ 4â€“6).
  â€¢ ÐÐºÐ¾ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ÑŠÑ‚ Ðµ Ñ‡Ð¸ÑÑ‚Ð¾ Ð²ÑŠÑ‚Ñ€ÐµÑˆÐµÐ½ (Ð¼ÐµÐ¶Ð´Ñƒ Ð½Ð°ÑˆÐ¸ ÑÐºÐ»Ð°Ð´Ð¾Ð²Ðµ/Ð¾Ð±ÐµÐºÑ‚Ð¸) â€“ Ð¾ÑÑ‚Ð°Ð²Ð¸ ÐºÐ¾Ð»Ð¾Ð½Ð¸ 4â€“6 Ð¿Ñ€Ð°Ð·Ð½Ð¸.

ÐšÐ¾Ð»Ð¾Ð½Ð° 4 â€žÐŸÐ°Ñ€Ñ‚Ð½ÑŒÐ¾Ñ€â€œ Ð¸ ÐºÐ¾Ð»Ð¾Ð½Ð° 5 â€žÐ•Ð˜Ðšâ€œ Ð’Ð˜ÐÐÐ“Ð˜ Ð¾Ð¿Ð¸ÑÐ²Ð°Ñ‚ ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚Ð° (Ð´Ñ€ÑƒÐ³Ð°Ñ‚Ð° ÑÑ‚Ñ€Ð°Ð½Ð° Ð¿Ð¾ ÑÐ´ÐµÐ»ÐºÐ°Ñ‚Ð°), Ð° Ð½Ðµ Ð½Ð°ÑˆÐ°Ñ‚Ð° Ñ„Ð¸Ñ€Ð¼Ð°.
`.trim();return`Ð¢Ð¸ ÑÐ¸ ÐµÐºÑÐ¿ÐµÑ€Ñ‚ Ð¿Ð¾ Ð¸Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ Ð½Ð° Ð´Ð°Ð½Ð½Ð¸ Ð¾Ñ‚ Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð¸ Ð¸ ÑÑ‡ÐµÑ‚Ð¾Ð²Ð¾Ð´Ð½Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸ Ð·Ð° Ð±ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ°Ñ‚Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ð° ÐŸÐ»ÑŽÑ ÐœÐ¸Ð½ÑƒÑ.

Ð’ÐÐ–ÐÐ Ð˜ÐÐ¤ÐžÐ ÐœÐÐ¦Ð˜Ð¯:
- Ð¢Ð¸Ð¿ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ (Ð¸Ð·Ð±Ñ€Ð°Ð½ Ð¾Ñ‚ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»Ñ): ${t}${G?` â€“ ${G}`:""}
- Ð¢Ð¾Ð·Ð¸ Ð½Ð¾Ð¼ÐµÑ€ Ð¢Ð Ð¯Ð‘Ð’Ð Ð´Ð° Ð±ÑŠÐ´Ðµ Ð¿Ð¾ÑÑ‚Ð°Ð²ÐµÐ½ Ð² ÐšÐžÐ›ÐžÐÐ 1 (Ð¿ÑŠÑ€Ð²Ð°Ñ‚Ð° ÐºÐ¾Ð»Ð¾Ð½Ð°) Ð½Ð° Ð’Ð¡Ð•ÐšÐ˜ Ñ€ÐµÐ´ Ð¾Ñ‚ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ñ‚Ðµ Ð´Ð°Ð½Ð½Ð¸.
- Ð’Ð¸Ð´ Ð½Ð° Ð°Ñ€Ñ‚Ð¸ÐºÑƒÐ»Ð° (Ð¸Ð·Ð±Ñ€Ð°Ð½ Ð¾Ñ‚ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»Ñ): ${a}
- Ð¢Ð°Ð·Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ ÑÐµ Ð¸Ð·Ð¿Ð¾Ð»Ð·Ð²Ð° Ð¾Ñ‚ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐÐ¢Ð Ð·Ð° Ð¿Ð¾Ð¿ÑŠÐ»Ð²Ð°Ð½Ðµ Ð½Ð° ÐºÐ¾Ð»Ð¾Ð½Ð° 8 â€žÐ’Ð¸Ð´â€œ. Ð¢Ð°Ð·Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ Ð¢Ð Ð¯Ð‘Ð’Ð Ð´Ð° Ð±ÑŠÐ´Ðµ Ð¿Ð¾ÑÑ‚Ð°Ð²ÐµÐ½Ð° Ð² ÐšÐžÐ›ÐžÐÐ 8 (Ð’Ð¸Ð´) Ð½Ð° Ð’Ð¡Ð•ÐšÐ˜ Ñ€ÐµÐ´ Ð¾Ñ‚ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ñ‚Ðµ Ð´Ð°Ð½Ð½Ð¸.
- ÐžÐ±ÐµÐºÑ‚Ð¸ (Ð¸Ð·Ð±Ñ€Ð°Ð½ Ð¾Ñ‚ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»Ñ): ${x}
- Ð¢Ð°Ð·Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ Ð¢Ð Ð¯Ð‘Ð’Ð Ð´Ð° Ð±ÑŠÐ´Ðµ Ð¿Ð¾ÑÑ‚Ð°Ð²ÐµÐ½Ð° Ð² ÐšÐžÐ›ÐžÐÐ 7 Ð½Ð° Ð’Ð¡Ð•ÐšÐ˜ Ñ€ÐµÐ´ Ð¾Ñ‚ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ñ‚Ðµ Ð´Ð°Ð½Ð½Ð¸.

${H}

Ð˜Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð¹ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸Ñ‚Ðµ Ð¾Ñ‚ ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑÑ‚Ð°:
${h.extractionInstructions?h.extractionInstructions.map(($,N)=>`${N+1}. ${$}`).join(`
`):"ÐÑÐ¼Ð° Ð´Ð¾Ð¿ÑŠÐ»Ð½Ð¸Ñ‚ÐµÐ»Ð½Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð·Ð° Ñ‚Ð¾Ð·Ð¸ Ñ‚Ð¸Ð¿ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚."}

Ð•Ð”Ð˜Ð CSV Ð Ð•Ð” = Ð•Ð”ÐÐ ÐŸÐžÐ—Ð˜Ð¦Ð˜Ð¯ ÐžÐ¢ Ð”ÐžÐšÐ£ÐœÐ•ÐÐ¢Ð:
- Ð—Ð° Ð’Ð¡Ð¯ÐšÐ ÐŸÐžÐ—Ð˜Ð¦Ð˜Ð¯ (Ð°Ñ€Ñ‚Ð¸ÐºÑƒÐ»/Ñ€ÐµÐ´ Ð¾Ñ‚ Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð°Ñ‚Ð°) ÑÑŠÐ·Ð´Ð°Ð¹ Ð¾Ñ‚Ð´ÐµÐ»ÐµÐ½ Ñ€ÐµÐ´ Ð² CSV.
- ÐÐ°Ñ‡Ð°Ð»Ð½Ð¸Ñ‚Ðµ ÐºÐ¾Ð»Ð¾Ð½Ð¸ (1â€“${u}) ÑÐ° ÐµÐ´Ð½Ð°ÐºÐ²Ð¸ Ð·Ð° Ð²ÑÐ¸Ñ‡ÐºÐ¸ Ñ€ÐµÐ´Ð¾Ð²Ðµ Ð½Ð° ÐµÐ´Ð¸Ð½ Ð¸ ÑÑŠÑ‰ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚.
- ÐŸÐ¾Ð»ÐµÑ‚Ð°Ñ‚Ð° Ð·Ð° Ð¾Ð±Ñ‰Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸ (ÐžÐ±Ñ‰Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚, Ð”Ð”Ð¡, ÐŸÐ»Ð°Ñ‚ÐµÐ½Ð¾ Ð¸ Ñ‚.Ð½.) ÑÐµ Ð¿Ð¾Ð¿ÑŠÐ»Ð²Ð°Ñ‚ Ð¡ÐÐœÐž Ð½Ð° ÐŸÐªÐ Ð’Ð˜Ð¯ Ñ€ÐµÐ´ Ð·Ð° Ð´Ð°Ð´ÐµÐ½ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚; Ð½Ð° ÑÐ»ÐµÐ´Ð²Ð°Ñ‰Ð¸Ñ‚Ðµ Ñ€ÐµÐ´Ð¾Ð²Ðµ ÑÐµ Ð¾ÑÑ‚Ð°Ð²ÑÑ‚ Ð¿Ñ€Ð°Ð·Ð½Ð¸.

CSV Ð¤ÐžÐ ÐœÐÐ¢:
- Ð Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ» Ð¼ÐµÐ¶Ð´Ñƒ ÐºÐ¾Ð»Ð¾Ð½Ð¸Ñ‚Ðµ: "${T}"
- Ð Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ» Ð½Ð° Ñ€ÐµÐ´Ð¾Ð²ÐµÑ‚Ðµ: CRLF (\\r\\n)
- ÐÐ¯ÐœÐ Ð·Ð°Ð³Ð»Ð°Ð²ÐµÐ½ Ñ€ÐµÐ´ â€“ ÑÐ°Ð¼Ð¾ Ñ€ÐµÐ´Ð¾Ð²Ðµ Ñ Ð´Ð°Ð½Ð½Ð¸
- Ð›Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð¸Ñˆ Ð² UTF-8, Ð½Ð¾ Ñ‚ÐµÐºÑÑ‚ÑŠÑ‚ Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ðµ ÐºÐ¾Ñ€ÐµÐºÑ‚ÐµÐ½ Ð½Ð° ÐºÐ¸Ñ€Ð¸Ð»Ð¸Ñ†Ð° (Ð¿Ð¾-ÐºÑŠÑÐ½Ð¾ Ñ„Ð°Ð¹Ð»ÑŠÑ‚ Ñ‰Ðµ Ð±ÑŠÐ´Ðµ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½ ÐºÐ°Ñ‚Ð¾ Windows-1251).

ÐšÐžÐ›ÐžÐÐ˜ (ÐœÐ˜ÐÐ˜ÐœÐ£Ðœ ${u} ÐºÐ¾Ð»Ð¾Ð½Ð¸, Ð²Ð¸Ð½Ð°Ð³Ð¸ Ð² Ñ‚Ð¾Ð·Ð¸ Ñ€ÐµÐ´ Ð·Ð° Ð¿ÑŠÑ€Ð²Ð¸Ñ‚Ðµ ${u}):
${z}

Ð”ÐžÐŸÐªÐ›ÐÐ˜Ð¢Ð•Ð›ÐÐ˜ ÐšÐžÐ›ÐžÐÐ˜:
- Ð’ ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑÑ‚Ð° Ð¸Ð¼Ð° Ð¾Ð±Ñ‰Ð¾ ${h.columns.length} ÐºÐ¾Ð»Ð¾Ð½Ð¸.
- Ð—ÐÐ”ÐªÐ›Ð–Ð˜Ð¢Ð•Ð›ÐÐž Ð¿Ð¾Ð¿ÑŠÐ»Ð²Ð°Ð¹ ÐºÐ¾Ð»Ð¾Ð½Ð¸ 1â€“${u}, Ñ Ð¸Ð·ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð½Ð° ÐºÐ¾Ð»Ð¾Ð½Ð° 8, ÐºÐ¾ÑÑ‚Ð¾ Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ð±ÑŠÐ´Ðµ Ð¾ÑÑ‚Ð°Ð²ÐµÐ½Ð° Ð¿Ñ€Ð°Ð·Ð½Ð° â€“ Ñ‚Ñ Ñ‰Ðµ ÑÐµ Ð¿Ð¾Ð¿ÑŠÐ»Ð½Ð¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¾ Ð¾Ñ‚ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ñ‚Ð°.
- ÐÐºÐ¾ Ð¸Ð¼Ð°Ñˆ Ð½Ð°Ð´ÐµÐ¶Ð´Ð½Ð¸ Ð´Ð°Ð½Ð½Ð¸ Ð·Ð° ÐºÐ¾Ð»Ð¾Ð½Ð¸ ÑÐ»ÐµÐ´ ${u}, Ð´Ð¾Ð±Ð°Ð²Ð¸ Ð³Ð¸ Ð² ÑÑŠÑ‰Ð¸Ñ Ñ€ÐµÐ´, Ð² ÑÑŠÑ‰Ð¸Ñ Ñ€ÐµÐ´ Ð½Ð° ÐºÐ¾Ð»Ð¾Ð½Ð¸Ñ‚Ðµ.
- ÐÐºÐ¾ ÐºÐ¾Ð»Ð¾Ð½Ð° Ð½ÑÐ¼Ð° Ð´Ð°Ð½Ð½Ð¸, Ð¾ÑÑ‚Ð°Ð²Ð¸ Ñ Ð¿Ñ€Ð°Ð·Ð½Ð° (Ð´Ð²Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð½Ð¸ "${T}").

Ð’ÐÐ›Ð˜Ð”ÐÐ¦Ð˜Ð¯:
${Object.entries(h.validationRules).map(([$,N])=>`- ${$}: ${N}`).join(`
`)}

Ð’ÐÐ–ÐÐ˜ ÐŸÐ ÐÐ’Ð˜Ð›Ð:
1. ÐšÐžÐ›ÐžÐÐ 1 Ð’Ð˜ÐÐÐ“Ð˜ ÑÑŠÐ´ÑŠÑ€Ð¶Ð° Ð½Ð¾Ð¼ÐµÑ€Ð° Ð½Ð° Ñ‚Ð¸Ð¿Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚: ${t}.
2. ÐšÐžÐ›ÐžÐÐ 8 â€žÐ’Ð¸Ð´â€œ ÐœÐžÐ–Ð• Ð”Ð Ð‘ÐªÐ”Ð• ÐžÐ¡Ð¢ÐÐ’Ð•ÐÐ ÐŸÐ ÐÐ—ÐÐ â€“ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ñ‚Ð° Ñ‰Ðµ Ð·Ð°Ð¿Ð¸ÑˆÐµ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ ${a} Ð·Ð° Ð²ÑÐµÐºÐ¸ Ñ€ÐµÐ´.
3. Ð”Ð°Ñ‚Ð¸Ñ‚Ðµ ÑÐ° Ð²ÑŠÐ² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ dd.mm.yyyy (Ñ Ð²Ð¾Ð´ÐµÑ‰Ð¸ Ð½ÑƒÐ»Ð¸).
4. Ð§Ð¸ÑÐ»Ð°Ñ‚Ð° ÑÐ° Ð±ÐµÐ· Ñ€Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ» Ð·Ð° Ñ…Ð¸Ð»ÑÐ´Ð¸Ñ‚Ðµ Ð¸ Ð±ÐµÐ· Ð²Ð°Ð»ÑƒÑ‚Ð½Ð¸ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¸ (Ð»Ð²., â‚¬, $ Ð¸ Ð´Ñ€.).
5. ÐÐµ Ð¸Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð¹ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¸ " ' / \\ & Ð² Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ð¸ Ð¿Ð¾Ð»ÐµÑ‚Ð°.
6. ÐšÐ¾Ð»Ð¾Ð½Ð° 4 â€žÐŸÐ°Ñ€Ñ‚Ð½ÑŒÐ¾Ñ€â€œ Ð¸ ÐºÐ¾Ð»Ð¾Ð½Ð° 5 â€žÐ•Ð˜Ðšâ€œ Ð²Ð¸Ð½Ð°Ð³Ð¸ Ð¾Ð¿Ð¸ÑÐ²Ð°Ñ‚ ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚Ð° (Ð´Ñ€ÑƒÐ³Ð°Ñ‚Ð° ÑÑ‚Ñ€Ð°Ð½Ð° Ð¿Ð¾ ÑÐ´ÐµÐ»ÐºÐ°Ñ‚Ð°).

Ð˜Ð—Ð¥ÐžÐ”:
Ð’ÑŠÑ€Ð½Ð¸ Ð¡ÐÐœÐž CSV Ð´Ð°Ð½Ð½Ð¸Ñ‚Ðµ, Ð±ÐµÐ· Ð½Ð¸ÐºÐ°ÐºÑŠÐ² Ð´Ð¾Ð¿ÑŠÐ»Ð½Ð¸Ñ‚ÐµÐ»ÐµÐ½ Ñ‚ÐµÐºÑÑ‚, Ð¾Ð±ÑÑÐ½ÐµÐ½Ð¸Ñ Ð¸Ð»Ð¸ markdown.
Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð½Ð¾ Ñ Ñ€ÐµÐ´Ð¾Ð²ÐµÑ‚Ðµ Ñ Ð´Ð°Ð½Ð½Ð¸ (Ð‘Ð•Ð— Ð·Ð°Ð³Ð»Ð°Ð²Ð¸Ñ).
Ð’ÑÐµÐºÐ¸ Ñ€ÐµÐ´ Ð¢Ð Ð¯Ð‘Ð’Ð Ð´Ð° Ð¸Ð¼Ð° ÐœÐ˜ÐÐ˜ÐœÐ£Ðœ ${u} ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸ (ÐºÐ¾Ð»Ð¾Ð½Ð¸), Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸ Ñ "${T}".
ÐšÐžÐ›ÐžÐÐ 1 Ð½Ð° Ð²ÑÐµÐºÐ¸ Ñ€ÐµÐ´ Ð¢Ð Ð¯Ð‘Ð’Ð Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°: ${t}.
ÐšÐžÐ›ÐžÐÐ 7 Ð½Ð° Ð²ÑÐµÐºÐ¸ Ñ€ÐµÐ´ Ð¢Ð Ð¯Ð‘Ð’Ð Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°: ${x}.
ÐšÐžÐ›ÐžÐÐ 8 Ð½Ð° Ð²ÑÐµÐºÐ¸ Ñ€ÐµÐ´ Ð¢Ð Ð¯Ð‘Ð’Ð Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°: ${a}.`},oe=async()=>{var x,h,T,u,z,J,G,H;if(!s)return;if(!A){v("ÐœÐ¾Ð»Ñ, Ð¸Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ Ñ‚Ð¸Ð¿ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚.");return}if(!f){v("ÐœÐ¾Ð»Ñ, Ð²ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Gemini API ÐºÐ»ÑŽÑ‡."),I(!0);return}const t=re(),a=ie();if(P===F&&!t){v('ÐœÐ¾Ð»Ñ, Ð²ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Ñ€ÑŠÑ‡Ð½Ð¾ "Ð’Ð¸Ð´ Ð½Ð° Ð°Ñ€Ñ‚Ð¸ÐºÑƒÐ»Ð°".');return}if(V!==F&&!a){v('ÐœÐ¾Ð»Ñ, Ð²ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Ñ€ÑŠÑ‡Ð½Ð¾ "ÐžÐ±ÐµÐºÑ‚Ð¸".');return}g(!0),w(null),R(null),p(!1);try{const y=new FileReader,Z=await new Promise((O,C)=>{y.onload=D=>{var xe;const te=((xe=D.target)==null?void 0:xe.result).split(",")[1];O(te)},y.onerror=C,y.readAsDataURL(s)}),$=je(A,t,a);let N="";if(n==="gemini-2.5-flash"||n==="gemini-2.5-pro"){const O=`https://generativelanguage.googleapis.com/v1/models/${n}:generateContent?key=${f}`,C={contents:[{parts:[{text:$},{inline_data:{mime_type:s.type,data:Z}}]}]},D=await fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(!D.ok){const te=await D.json();throw new Error(`Gemini API error: ${((x=te.error)==null?void 0:x.message)||D.statusText}`)}N=((J=(z=(u=(T=(h=(await D.json()).candidates)==null?void 0:h[0])==null?void 0:T.content)==null?void 0:u.parts)==null?void 0:z[0])==null?void 0:J.text)||""}else N=((await new fe({apiKey:f}).chats.create({model:n}).sendMessage({message:[{text:$},{inlineData:{mimeType:s.type,data:Z}}]})).text||"").trim();let X=N.trim();X.startsWith("```")&&(X=X.replace(/```csv\n?/gi,"").replace(/```\n?/g,"").trim());const de=ne(A),ue=((G=de.extractionSettings)==null?void 0:G.delimiter)||";",Ne=((H=de.extractionSettings)==null?void 0:H.minimumColumns)||44,me=X.split(/\r?\n/).map(O=>O.trim()).filter(O=>O.length>0);if(me.length===0){v("ÐœÐ¾Ð´ÐµÐ»ÑŠÑ‚ Ð½Ðµ Ð²ÑŠÑ€Ð½Ð° Ð²Ð°Ð»Ð¸Ð´Ð½Ð¸ CSV Ð´Ð°Ð½Ð½Ð¸."),R(null),g(!1);return}const Ce=me.map(O=>{const C=O.split(ue);for(;C.length<Ne;)C.push("");return _e.forEach(D=>{D<C.length&&(C[D]=Ge(C[D]))}),C[0]=A,C[6]=a,C[7]=t,C.join(ue)}).join(`\r
`),Se=`invoice_${s.name.split(".")[0]}_${Date.now()}.csv`;R({csv:Ce,fileName:Se})}catch(y){console.error(y),v(y instanceof Error?y.message:"Ð’ÑŠÐ·Ð½Ð¸ÐºÐ½Ð° Ð³Ñ€ÐµÑˆÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°Ñ‚Ð° Ð½Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°. ÐœÐ¾Ð»Ñ, Ð¾Ð¿Ð¸Ñ‚Ð°Ð¹Ñ‚Ðµ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾.")}finally{g(!1)}},we=async()=>{var T;if(!s)return;if(A!=="7"){v("RTF Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°Ñ‚Ð° Ðµ Ð´Ð¾ÑÑ‚ÑŠÐ¿Ð½Ð° ÑÐ°Ð¼Ð¾ Ð·Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ Ñ‚Ð¸Ð¿ 7 - ÐšÐ°ÑÐ¾Ð²Ð¸ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð¸.");return}const t=re(),a=ie();if(P===F&&!t){v('ÐœÐ¾Ð»Ñ, Ð²ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Ñ€ÑŠÑ‡Ð½Ð¾ "Ð’Ð¸Ð´ Ð½Ð° Ð°Ñ€Ñ‚Ð¸ÐºÑƒÐ»Ð°".');return}if(V!==F&&!a){v('ÐœÐ¾Ð»Ñ, Ð²ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Ñ€ÑŠÑ‡Ð½Ð¾ "ÐžÐ±ÐµÐºÑ‚Ð¸".');return}const x=s.name.toLowerCase().endsWith(".rtf")||s.type==="application/rtf"||s.type==="text/rtf",h=s.name.toLowerCase().endsWith(".doc")||s.name.toLowerCase().endsWith(".docx")||s.type==="application/msword"||s.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document";if(!x&&!h){v(`Ð¤Ð°Ð¹Ð»ÑŠÑ‚ "${s.name}" Ð½Ðµ Ðµ RTF Ð¸Ð»Ð¸ Word Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚. ÐœÐ¾Ð»Ñ, Ð¸Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ .rtf Ð¸Ð»Ð¸ .doc/.docx Ñ„Ð°Ð¹Ð».`);return}r(!0),w(null),R(null);try{const u=new FileReader,z=await new Promise((H,y)=>{u.onload=Z=>{var N;const $=(N=Z.target)==null?void 0:N.result;H($)},u.onerror=y,u.readAsText(s,"utf-8")}),J=Ae(z),G=$e(J,A,t,a);if(G.length===0)v("ÐÐµ Ð±ÑÑ…Ð° Ð½Ð°Ð¼ÐµÑ€ÐµÐ½Ð¸ Ð´Ð°Ð½Ð½Ð¸ Ð·Ð° Ð¸Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ Ð¾Ñ‚ RTF Ñ„Ð°Ð¹Ð»Ð°."),R(null);else{const y=((T=ne(A).extractionSettings)==null?void 0:T.delimiter)||";",Z=G.map(N=>N.join(y)).join(`\r
`),$=`cash_sales_rtf_${s.name.split(".")[0]}_${Date.now()}.csv`;R({csv:Z,fileName:$})}}catch(u){console.error(u),v(u instanceof Error?u.message:"Ð’ÑŠÐ·Ð½Ð¸ÐºÐ½Ð° Ð³Ñ€ÐµÑˆÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°Ñ‚Ð° Ð½Ð° RTF Ñ„Ð°Ð¹Ð»Ð°.")}finally{r(!1)}},ye=()=>{if(!S)return;const t="\uFEFF",a=new Blob([t+S.csv],{type:"text/csv;charset=utf-8;"}),x=document.createElement("a"),h=URL.createObjectURL(a);x.setAttribute("href",h),x.setAttribute("download",S.fileName),x.style.visibility="hidden",document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(h)},ce=()=>{c(null),d(null),R(null),w(null),k("Ð¡Ð¢ÐžÐšÐ˜"),Y(""),Q("ÐœÐÐ¢Ð•Ð Ð˜ÐÐ›Ð˜"),K(""),B.current&&(B.current.value="")};return m?e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð½Ð° Gemini API"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Ð’ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Ð²Ð°ÑˆÐ¸Ñ Gemini API ÐºÐ»ÑŽÑ‡. ÐšÐ»ÑŽÑ‡ÑŠÑ‚ ÑÐµ Ð·Ð°Ð¿Ð°Ð·Ð²Ð° Ð»Ð¾ÐºÐ°Ð»Ð½Ð¾ Ð²ÑŠÐ² Ð²Ð°ÑˆÐ¸Ñ Ð±Ñ€Ð°ÑƒÐ·ÑŠÑ€."}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"Gemini API ÐºÐ»ÑŽÑ‡:"}),e.jsx("input",{type:"password",value:f,onChange:t=>b(t.target.value),className:"w-full px-4 py-3 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:()=>ae(f,n),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Ð—Ð°Ð¿Ð°Ð·Ð¸"}),f&&e.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium",children:"ÐŸÑ€Ð¾Ð´ÑŠÐ»Ð¶Ð¸"})]})]})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Ð˜Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ Ð½Ð° Ð´Ð°Ð½Ð½Ð¸ Ð¾Ñ‚ Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð°"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative model-selector-container",children:[e.jsxs("button",{onClick:()=>p(!L),className:"text-sm text-blue-400 hover:text-blue-300 flex items-center gap-1",children:["ðŸ¤– ",n==="gemini-2.0-flash"?"Gemini 2.0 Flash":n==="gemini-2.5-flash"?"Gemini 2.5 Flash":"Gemini 2.5 Pro",e.jsx("span",{className:"text-xs",children:"â–¼"})]}),L&&e.jsx("div",{className:"absolute right-0 top-full mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg z-50 min-w-[200px]",children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2 font-medium",children:"Ð˜Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ Ð¼Ð¾Ð´ÐµÐ»:"}),[{value:"gemini-2.0-flash",label:"Gemini 2.0 Flash â€“ Ð±ÑŠÑ€Ð· Ð¸ ÐµÐ²Ñ‚Ð¸Ð½"},{value:"gemini-2.5-flash",label:"Gemini 2.5 Flash â€“ Ð¿Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð° Ñ‚Ð¾Ñ‡Ð½Ð¾ÑÑ‚"},{value:"gemini-2.5-pro",label:"Gemini 2.5 Pro â€“ Ð½Ð°Ð¹-Ñ‚Ð¾Ñ‡ÐµÐ½"}].map(t=>e.jsx("button",{onClick:()=>{const a=t.value;o(a),ae(f,a),p(!1)},className:`w-full text-left px-3 py-2 text-xs rounded hover:bg-gray-600 transition-colors ${n===t.value?"bg-blue-600 text-white":"text-gray-300"}`,children:t.label},t.value))]})})]}),e.jsx("button",{onClick:()=>I(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"âš™ï¸ API Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"})]})]}),e.jsx("p",{className:"text-gray-400 mb-6",children:"ÐšÐ°Ñ‡ÐµÑ‚Ðµ PDF Ð¸Ð»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð½Ð° Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð° Ð·Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¾ Ð¸Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ Ð½Ð° CSV, ÑÑŠÐ²Ð¼ÐµÑÑ‚Ð¸Ð¼ Ñ ÐŸÐ»ÑŽÑ ÐœÐ¸Ð½ÑƒÑ."}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm text-gray-300 mb-1",children:["Ð¢Ð¸Ð¿ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:A,onChange:t=>U(t.target.value),className:"w-full px-3 py-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:i,children:[e.jsx("option",{value:"1",children:"1 - Ð¤Ð°ÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð°"}),e.jsx("option",{value:"2",children:"2 - Ð”ÐµÐ±Ð¸Ñ‚Ð½Ð¾ Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð°"}),e.jsx("option",{value:"3",children:"3 - ÐšÑ€ÐµÐ´Ð¸Ñ‚Ð½Ð¾ Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð°"}),e.jsx("option",{value:"4",children:"4 - Ð¤Ð°ÐºÑ‚ÑƒÑ€Ð° Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ°"}),e.jsx("option",{value:"5",children:"5 - Ð”ÐµÐ±Ð¸Ñ‚Ð½Ð¾ Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ°"}),e.jsx("option",{value:"6",children:"6 - ÐšÑ€ÐµÐ´Ð¸Ñ‚Ð½Ð¾ Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ°"}),e.jsx("option",{value:"7",children:"7 - ÐšÐ°ÑÐ¾Ð²Ð¸ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð¸"}),e.jsx("option",{value:"8",children:"8 - Ð¢Ñ€Ð°Ð½ÑÑ„ÐµÑ€"}),e.jsx("option",{value:"9",children:"9 - Ð‘Ñ€Ð°Ðº (Ð ÐÐ—Ð¥ÐžÐ”)"}),e.jsx("option",{value:"10",children:"10 - Ð‘Ñ€Ð°Ðº (ÐœÐžÐ›)"}),e.jsx("option",{value:"11",children:"11 - Ð¡ÐºÐ»Ð°Ð´Ð¾Ð²Ð¾ Ð¸ÑÐºÐ°Ð½Ðµ"}),e.jsx("option",{value:"12",children:"12 - Ð¡Ñ‚Ð¾ÐºÐ¾Ð²Ð° Ñ€Ð°Ð·Ð¿Ð¸ÑÐºÐ° (Ð¡Ð¢)"}),e.jsx("option",{value:"13",children:"13 - Ð¡ÐºÐ»Ð°Ð´Ð¾Ð²Ð° Ñ€Ð°Ð·Ð¿Ð¸ÑÐºÐ° (Ð¡Ð )"}),e.jsx("option",{value:"14",children:"14 - Ð”Ð°Ð²Ð°Ð½Ðµ ÑÑ‚Ð¾ÐºÐ¸ Ð½Ð° ÐºÐ¾Ð½ÑÐ¸Ð³Ð½Ð°Ñ†Ð¸Ñ (ÐšÐ”) ÑÑŠÑ ÑÑ‡ÐµÑ‚. Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸"}),e.jsx("option",{value:"15",children:"15 - Ð”Ð°Ð²Ð°Ð½Ðµ ÑÑ‚Ð¾ÐºÐ¸ Ð½Ð° ÐºÐ¾Ð½ÑÐ¸Ð³Ð½Ð°Ñ†Ð¸Ñ (ÐšÐ”) Ð±ÐµÐ· ÑÑ‡ÐµÑ‚. Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ð˜Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ Ñ‚Ð¸Ð¿Ð° Ð½Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°. ÐÐ¾Ð¼ÐµÑ€ÑŠÑ‚ Ñ‰Ðµ Ð±ÑŠÐ´Ðµ Ð¿Ð¾ÑÑ‚Ð°Ð²ÐµÐ½ Ð² Ð¿ÑŠÑ€Ð²Ð°Ñ‚Ð° ÐºÐ¾Ð»Ð¾Ð½Ð° Ð½Ð° Ð²ÑÐµÐºÐ¸ Ñ€ÐµÐ´."})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-300 mb-1",children:["ÐžÐ±ÐµÐºÑ‚Ð¸ ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:V,onChange:t=>{const a=t.target.value;Q(a),a!==F&&K("")},className:"w-full px-3 py-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:i,children:[e.jsx("option",{value:"Ð¡Ð¢ÐžÐšÐ",children:"Ð¡Ð¢ÐžÐšÐ"}),e.jsx("option",{value:"ÐœÐÐ¢Ð•Ð Ð˜ÐÐ›Ð˜",children:"ÐœÐÐ¢Ð•Ð Ð˜ÐÐ›Ð˜"}),e.jsx("option",{value:"ÐŸÐ ÐžÐ”Ð£ÐšÐ¦Ð˜Ð¯",children:"ÐŸÐ ÐžÐ”Ð£ÐšÐ¦Ð˜Ð¯"}),e.jsx("option",{value:F,children:"Ð”Ñ€ÑƒÐ³Ð¾ (Ñ€ÑŠÑ‡Ð½Ð¾)â€¦"})]}),V===F&&e.jsx("input",{value:q,onChange:t=>K(t.target.value),placeholder:"Ð’ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Ñ€ÑŠÑ‡Ð½Ð¾ ÐžÐ±ÐµÐºÑ‚â€¦",className:"mt-2 w-full px-3 py-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:i}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ð˜Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ Ñ‚Ð¸Ð¿Ð° Ð½Ð° Ð¾Ð±ÐµÐºÑ‚Ð° Ð·Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-300 mb-1",children:["Ð’Ð¸Ð´ Ð½Ð° Ð°Ñ€Ñ‚Ð¸ÐºÑƒÐ»Ð° ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:P,onChange:t=>{const a=t.target.value;k(a),a!==F&&Y("")},className:"w-full px-3 py-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:i,children:[e.jsx("option",{value:"Ð¡Ñ‚Ð¾ÐºÐ¸",children:"Ð¡Ñ‚Ð¾ÐºÐ¸"}),e.jsx("option",{value:"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¸",children:"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¸"}),e.jsx("option",{value:"ÐŸÑ€Ð¾Ð´ÑƒÐºÑ†Ð¸Ñ",children:"ÐŸÑ€Ð¾Ð´ÑƒÐºÑ†Ð¸Ñ"}),e.jsx("option",{value:"Ð£ÑÐ»ÑƒÐ³Ð¸",children:"Ð£ÑÐ»ÑƒÐ³Ð¸"}),e.jsx("option",{value:"Ð Ð°Ð·Ñ…Ð¾Ð´Ð¸ Ð·Ð° Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¸",children:"Ð Ð°Ð·Ñ…Ð¾Ð´Ð¸ Ð·Ð° Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¸"}),e.jsx("option",{value:"ÐÐ²Ð°Ð½Ñ",children:"ÐÐ²Ð°Ð½Ñ"}),e.jsx("option",{value:"ÐŸÑ€Ð¸ÑÐ¿Ð°Ð´Ð°Ð½Ðµ Ð½Ð° Ð°Ð²Ð°Ð½Ñ",children:"ÐŸÑ€Ð¸ÑÐ¿Ð°Ð´Ð°Ð½Ðµ Ð½Ð° Ð°Ð²Ð°Ð½Ñ"}),e.jsx("option",{value:"Ð”ÑŠÐ»Ð³Ð¾Ñ‚Ñ€Ð°Ð¹Ð½Ð¸ Ð°ÐºÑ‚Ð¸Ð²Ð¸",children:"Ð”ÑŠÐ»Ð³Ð¾Ñ‚Ñ€Ð°Ð¹Ð½Ð¸ Ð°ÐºÑ‚Ð¸Ð²Ð¸"}),e.jsx("option",{value:F,children:"Ð”Ñ€ÑƒÐ³Ð¾ (Ñ€ÑŠÑ‡Ð½Ð¾)â€¦"})]}),P===F&&e.jsx("input",{value:W,onChange:t=>Y(t.target.value),placeholder:"Ð’ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Ñ€ÑŠÑ‡Ð½Ð¾ Ð’Ð¸Ð´â€¦",className:"mt-2 w-full px-3 py-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:i}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ð¡Ñ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ñ‚Ð° Ñ‰Ðµ Ð±ÑŠÐ´Ðµ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð° Ð² ÐºÐ¾Ð»Ð¾Ð½Ð° 8 (Ð’Ð¸Ð´) Ð½Ð° Ð²ÑÐµÐºÐ¸ Ñ€ÐµÐ´."})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("input",{ref:B,type:"file",accept:"image/*,.pdf,.rtf,.doc,.docx",onChange:ve,className:"hidden"}),e.jsx("button",{onClick:()=>{var t;return(t=B.current)==null?void 0:t.click()},disabled:i||M,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors",children:s?"Ð¡Ð¼ÐµÐ½Ð¸ Ñ„Ð°Ð¹Ð»Ð°":"Ð˜Ð·Ð±ÐµÑ€Ð¸ Ñ„Ð°Ð¹Ð»"})]}),s&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[(s.size/1024).toFixed(2)," KB"]})]}),e.jsx("button",{onClick:ce,className:"text-red-400 hover:text-red-300 text-sm",children:"ÐŸÑ€ÐµÐ¼Ð°Ñ…Ð½Ð¸"})]}),j&&e.jsx("img",{src:j,alt:"Preview",className:"max-w-full max-h-64 rounded-lg mx-auto"})]}),s&&!S&&e.jsx(e.Fragment,{children:A==="7"&&(s.name.toLowerCase().endsWith(".rtf")||s.name.toLowerCase().endsWith(".doc")||s.name.toLowerCase().endsWith(".docx"))?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6",children:[e.jsx("button",{onClick:we,disabled:i||M,className:"py-3 px-4 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors",children:M?"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ð²Ð° RTF...":"ðŸ”§ ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¾ Ð¸Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ"}),e.jsx("button",{onClick:oe,disabled:i||M,className:"py-3 px-4 bg-orange-600 hover:bg-orange-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors",children:i?"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ð²Ð° AI...":"ðŸ¤– AI Ð¸Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-900/30 border border-blue-500 rounded-lg",children:[e.jsxs("p",{className:"text-blue-200 text-sm",children:[e.jsx("strong",{children:"ðŸ”§ ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¾ Ð¸Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ:"})," Ð‘ÑŠÑ€Ð·Ð° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð½Ð° RTF Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð¸ Ð±ÐµÐ· Ð¸Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð½Ðµ Ð½Ð° AI Ð¼Ð¾Ð´ÐµÐ»Ð¸."]}),e.jsxs("p",{className:"text-blue-200 text-sm mt-1",children:[e.jsx("strong",{children:"ðŸ¤– AI Ð¸Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ:"})," Ð˜Ð·Ð¿Ð¾Ð»Ð·Ð²Ð° AI Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð·Ð° Ð¿Ð¾-ÑÐ»Ð¾Ð¶Ð½Ð¸ ÑÐ»ÑƒÑ‡Ð°Ð¸, Ð½Ð¾ Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ð¸Ð¼Ð° Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð³Ð¾Ð»ÐµÐ¼Ð¸ Ñ„Ð°Ð¹Ð»Ð¾Ð²Ðµ."]})]})]}):e.jsx("button",{onClick:oe,disabled:i||M,className:"w-full py-3 px-4 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors mb-6",children:i?"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ð²Ð° ÑÐµâ€¦":"Ð˜Ð·Ð²Ð»ÐµÑ‡Ð¸ Ð´Ð°Ð½Ð½Ð¸"})}),S&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"mb-4 p-4 bg-gray-900 rounded-lg",children:[e.jsx("h3",{className:"text-white font-medium mb-2",children:"CSV Ð¿Ñ€ÐµÐ³Ð»ÐµÐ´:"}),e.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto bg-gray-950 p-3 rounded max-h-96 overflow-y-auto whitespace-pre",children:S.csv})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:ye,className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Ð˜Ð·Ñ‚ÐµÐ³Ð»Ð¸ CSV"}),e.jsx("button",{onClick:ce,className:"flex-1 py-3 px-4 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"ÐÐ¾Ð² Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-white font-medium mb-2",children:"ÐŸÐ¾Ð´Ð´ÑŠÑ€Ð¶Ð°Ð½Ð¸ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸:"}),e.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ PDF Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸"}),e.jsx("li",{children:"â€¢ Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (JPG, PNG, WEBP)"}),e.jsx("li",{children:"â€¢ RTF Ñ„Ð°Ð¹Ð»Ð¾Ð²Ðµ (Ð·Ð° ÐºÐ°ÑÐ¾Ð²Ð¸ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð¸)"}),e.jsx("li",{children:"â€¢ Word Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸ (.doc, .docx)"}),e.jsx("li",{children:"â€¢ Ð¤Ð°ÐºÑ‚ÑƒÑ€Ð¸ Ð·Ð° ÑƒÑÐ»ÑƒÐ³Ð¸"})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"!"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-white",children:"Ð“Ñ€ÐµÑˆÐºÐ°"})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-300 text-sm",children:ee})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:be,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Ð—Ð°Ñ‚Ð²Ð¾Ñ€Ð¸"})})]})})]})},Be=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm-2.5 6.5a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0ZM12 1a9 9 0 0 0-9 9v6.5a2.5 2.5 0 0 0 2.5 2.5h13A2.5 2.5 0 0 0 21 16.5V10a9 9 0 0 0-9-9Zm7 15.5H5a.5.5 0 0 1-.5-.5V10a7 7 0 0 1 14 0v6a.5.5 0 0 1-.5.5Z",clipRule:"evenodd"})}),Ze=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 6a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm-5.5 9.5a1.5 1.5 0 0 1 1.5-1.5h8a1.5 1.5 0 0 1 1.5 1.5v.055A7.002 7.002 0 0 1 12 20a7.002 7.002 0 0 1-5.5-2.445V15.5ZM12 4a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11Z",clipRule:"evenodd"})}),Ve=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e.jsx("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"})}),Ue=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),le=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M18.97 3.659a2.25 2.25 0 0 0-3.182 0l-10.94 10.94a3.75 3.75 0 1 0 5.304 5.303l7.693-7.693a.75.75 0 0 1 1.06 1.06l-7.693 7.693a5.25 5.25 0 1 1-7.424-7.424l10.939-10.94a3.75 3.75 0 1 1 5.303 5.304L9.097 18.835l-.008.008-.007.007-.002.002-.003.002A2.25 2.25 0 0 1 5.91 15.66l7.81-7.81a.75.75 0 0 1 1.061 1.06l-7.81 7.81a.75.75 0 0 0 1.054 1.068L18.97 6.84a2.25 2.25 0 0 0 0-3.182Z",clipRule:"evenodd"})}),ge=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}),We=()=>e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce"})]}),He=({message:s,isLoading:c,isStreaming:j})=>{const d=s.role==="user";return s.role==="system"?e.jsx("div",{className:"text-center text-sm text-gray-500 my-4 italic",children:s.text}):e.jsxs("div",{className:`flex items-start gap-3 ${d?"justify-end":""}`,children:[!d&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex-shrink-0 flex items-center justify-center mt-1",children:e.jsx(Be,{})}),e.jsxs("div",{className:`max-w-xl w-fit p-3 rounded-2xl ${d?"chat-bubble-gradient text-white rounded-br-lg":"bg-gray-700 text-gray-200 rounded-bl-lg"}`,children:[s.files&&s.files.length>0&&e.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:s.files.map((g,M)=>e.jsx("div",{className:"relative",children:g.preview?e.jsx("img",{src:g.preview,alt:g.name,className:"max-w-xs max-h-48 rounded-lg"}):e.jsxs("div",{className:"bg-gray-600 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(le,{}),e.jsx("span",{className:"truncate max-w-[200px]",children:g.name})]})},M))}),e.jsxs("p",{className:"whitespace-pre-wrap break-words",children:[s.text,c&&j&&!d&&e.jsx("span",{className:"inline-block w-1 h-4 bg-white animate-pulse ml-1 align-middle","aria-label":"typing indicator"})]}),c&&!j&&!d&&e.jsx(We,{})]}),d&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex-shrink-0 flex items-center justify-center mt-1",children:e.jsx(Ze,{})})]})};function Ke(){const s={id:"init",role:"system",text:"Session started. Type a message to begin chatting with Gemini."},[c,j]=l.useState("chat"),[d,i]=l.useState([s]),[g,M]=l.useState(""),[r,S]=l.useState(!1),[R,ee]=l.useState(he[0]),[w,A]=l.useState([]),U=l.useRef(null),P=l.useRef(null),k=l.useRef(null),W=l.useRef(null);l.useEffect(()=>{var n;(n=P.current)==null||n.scrollTo({top:P.current.scrollHeight,behavior:"smooth"})},[d]),l.useEffect(()=>{k.current&&(k.current.style.height="auto",k.current.style.height=`${k.current.scrollHeight}px`)},[g]),l.useEffect(()=>{!r&&k.current&&k.current.focus()},[r]),l.useEffect(()=>{c==="chat"&&k.current&&!r&&setTimeout(()=>{var n;(n=k.current)==null||n.focus()},100)},[c,r]);const Y=()=>{U.current=null,i([s]),S(!1)},V=n=>{n.id!==R.id&&(ee(n),U.current=null,i([{id:"mode-change-"+Date.now(),role:"system",text:`Model changed to ${n.name}. A new chat session has started.`}]),S(!1))},Q=async n=>{const o=n.target.files;if(!o||o.length===0)return;const f=[];for(let b=0;b<o.length;b++){const m=o[b],I=new FileReader;await new Promise(L=>{I.onload=p=>{var v;const E=(v=p.target)==null?void 0:v.result,_=E.split(",")[1],B={name:m.name,type:m.type,data:_};m.type.startsWith("image/")&&(B.preview=E),f.push(B),L()},I.readAsDataURL(m)})}A(b=>[...b,...f]),W.current&&(W.current.value="")},q=n=>{A(o=>o.filter((f,b)=>b!==n))},K=async n=>{n.preventDefault();const o=g.trim();if(!o&&w.length===0||r)return;const f={id:Date.now().toString(),role:"user",text:o||"(attached files)",files:w.length>0?[...w]:void 0};i(m=>[...m,f]),M(""),A([]),S(!0);const b=(Date.now()+1).toString();i(m=>[...m,{id:b,role:"model",text:""}]);try{if(!U.current){const p=localStorage.getItem("gemini_api_key")||void 0;if(!p)throw new Error("API ÐºÐ»ÑŽÑ‡ÑŠÑ‚ Ð½Ðµ Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð¸Ñ€Ð°Ð½. ÐœÐ¾Ð»Ñ, Ð¾Ñ‚Ð¸Ð´ÐµÑ‚Ðµ Ð² Invoice Extractor Ð¸ Ð²ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Ð²Ð°ÑˆÐ¸Ñ Gemini API ÐºÐ»ÑŽÑ‡ Ð² Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸Ñ‚Ðµ.");const _=localStorage.getItem("gemini_model")||R.model,B=new fe({apiKey:p});U.current=B.chats.create({model:_,config:R.config})}let m;if(f.files&&f.files.length>0){const p=[];o&&p.push({text:o}),f.files.forEach(E=>{p.push({inlineData:{mimeType:E.type,data:E.data}})}),m={message:p}}else m={message:o};const I=await U.current.sendMessageStream(m);let L="";for await(const p of I)L+=p.text,i(E=>E.map(_=>_.id===b?{..._,text:L}:_))}catch(m){console.error(m);const I=m instanceof Error?m.message:"An unknown error occurred.",L={id:"error-"+Date.now(),role:"system",text:`Error: ${I}. Please check your API key configuration.`};i(p=>p.filter(E=>E.id!==b).concat(L))}finally{S(!1)}};return e.jsxs("div",{className:"bg-gray-900 text-gray-200 h-full flex flex-col antialiased",children:[e.jsxs("header",{className:"p-4 border-b border-gray-800 bg-gray-900/80 backdrop-blur-sm sticky top-0 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"Invoice AI Tool"}),e.jsx("div",{className:"flex items-center gap-4",children:c==="chat"&&e.jsxs(e.Fragment,{children:[e.jsx(De,{modes:he,selectedMode:R,onSelect:V}),e.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(Ue,{}),"New Chat"]})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j("chat"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="chat"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Chat"}),e.jsx("button",{onClick:()=>j("invoice"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="invoice"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Invoice Extractor"})]})]}),c==="chat"?e.jsxs(e.Fragment,{children:[e.jsx("main",{ref:P,className:"flex-1 p-4 md:p-6 overflow-y-auto space-y-6",children:d.map((n,o)=>e.jsx(He,{message:n,isLoading:r&&o===d.length-1,isStreaming:n.text.length>0},n.id))}),e.jsx("footer",{className:"p-4 md:p-6 border-t border-gray-800 bg-gray-900",children:e.jsxs("form",{onSubmit:K,className:"max-w-3xl mx-auto",children:[w.length>0&&e.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:w.map((n,o)=>e.jsx("div",{className:"relative group",children:n.preview?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:n.preview,alt:n.name,className:"h-20 w-20 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>q(o),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ge,{})})]}):e.jsxs("div",{className:"relative bg-gray-700 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(le,{}),e.jsx("span",{className:"truncate max-w-[150px]",children:n.name}),e.jsx("button",{type:"button",onClick:()=>q(o),className:"ml-2 text-red-400 hover:text-red-300",children:e.jsx(ge,{})})]})},o))}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("input",{ref:W,type:"file",multiple:!0,accept:"image/*,.pdf,.txt,.doc,.docx",onChange:Q,className:"hidden","aria-label":"File input"}),e.jsx("button",{type:"button",onClick:()=>{var n;return(n=W.current)==null?void 0:n.click()},disabled:r,className:"w-12 h-12 rounded-full bg-gray-700 hover:bg-gray-600 flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Attach file",children:e.jsx(le,{})}),e.jsx("div",{className:"flex-1 bg-gray-800 rounded-2xl p-1 flex items-end",children:e.jsx("textarea",{ref:k,value:g,onChange:n=>M(n.target.value),onKeyDown:n=>{n.key==="Enter"&&!n.shiftKey&&!r&&(n.preventDefault(),K(n))},placeholder:r?"Waiting for response...":"Message Gemini...",className:`w-full bg-transparent p-2 resize-none border-none focus:ring-0 focus:outline-none max-h-48 transition-colors ${r?"placeholder-gray-600 text-gray-500":"placeholder-gray-500 text-white"}`,rows:1,disabled:r,"aria-label":"Chat input"})}),e.jsx("button",{type:"submit",disabled:r||!g.trim()&&w.length===0,className:"w-12 h-12 rounded-full flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed chat-bubble-gradient text-white","aria-label":"Send message",children:e.jsx(Ve,{})})]})]})})]}):e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx(Oe,{})})]})}const pe=document.getElementById("root");pe&&Ie.createRoot(pe).render(e.jsx(Ee.StrictMode,{children:e.jsx(Ke,{})}));
